/* esm.sh - @google/genai@1.11.0 */
var Fe=Object.create;var te=Object.defineProperty;var je=Object.getOwnPropertyDescriptor;var Oe=Object.getOwnPropertyNames;var _e=Object.getPrototypeOf,Se=Object.prototype.hasOwnProperty;var he=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Pe=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Oe(e))!Se.call(r,n)&&n!==t&&te(r,n,{get:()=>e[n],enumerable:!(i=je(e,n))||i.enumerable});return r};var Ce=(r,e,t)=>(t=r!=null?Fe(_e(r)):{},Pe(e||!r||!r. грудня?te(t,"default",{value:r,enumerable:!0}):t,r));var q=he((Me,F)=>{(function(r,e){typeof Me=="object"&&typeof F=="object"?F.exports=e():typeof define=="function"&&define.amd?define(e):r.base64js=e()})(Me,function(){"use strict";var r={},e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let n=0,o=e.length;n<o;++n)r[e.charAt(n)]=n;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function t(n){var o=n.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=n.charCodeAt(o-2)===61,s=n.charCodeAt(o-1)===61;return[o*3/4-a-s,a,s]}function i(n,o,a){return(o<<18|a<<12|n<<6|o)>>16}function n(o){var a=t(o),s=a[0],u=a[1],f=a[2],p=new Uint8Array(s);let c=0,l=f?s-2:u?s-1:s;var v=0;for(v=0;v<l;v+=3,c+=4){var h=r[o.charCodeAt(c)],d=r[o.charCodeAt(c+1)],m=r[o.charCodeAt(c+2)],g=r[o.charCodeAt(c+3)];p[v]=h<<2|d>>4,p[v+1]=d<<4&255|m>>2,p[v+2]=m<<6&255|g}if(u){var b=r[o.charCodeAt(c)],A=r[o.charCodeAt(c+1)],w=r[o.charCodeAt(c+2)];p[s-1]=b<<2|A>>4}if(f){var y=i(r[o.charCodeAt(c)],r[o.charCodeAt(c+1)]);p[s-2]=(y&16711680)>>16,p[s-1]=(y&65280)>>8}return p}function o(n){return e[(n>>18)&63]+e[(n>>12)&63]+e[(n>>6)&63]+e[n&63]}function a(n,u,f){var p,c="",l=n.length-f;for(let v=u;v<l;v+=3)p=n[v]<<16&16711680|n[v+1]<<8&65280|n[v+2]&255,c+=o(p);var h=n.length-l;return h===1?p=n[l]<<16&16711680:h===2&&(p=n[l]<<16&16711680|n[l+1]<<8&65280),h>0&&(c+=o(p).substring(0,h+1)+"==".substring(h)),c}F.exports.toByteArray=n,F.exports.fromByteArray=a})});var T=class extends Error{constructor(e,t){super(e),this.status=t}};var P=class{constructor(e){this.apiKey=e}async request(e,t,i,n){let o=n||{};o.method=e;let a=`${i?i.baseUrl:"https://generativelanguage.googleapis.com"}/${i?i.apiVersion:"v1"}/${t}`,s=new URL(a);s.searchParams.append("key",this.apiKey);let u={"Content-Type":"application/json"},f=await fetch(s.toString(),{...o,headers:u,body:JSON.stringify(t)});if(!f.ok){let p;try{let c=await f.json();p=c.error.message,c.error.details&&(p+=` ${JSON.stringify(c.error.details)}`)}catch{}throw new T(p,f.status)}return f}};var U=class{constructor(e,t){this.apiKey=e,this.requestOptions=t}async makeRequest(e,t,i){let n=new P(this.apiKey),o=await n.request("POST",e,this.requestOptions,i,{body:t});return o.json()}};var C=class extends U{constructor(e,t){super(e,t)}async generateContent(e){let t={};return e.tools&&(t.tools=e.tools),e.config&&(t.generationConfig=e.config),e.contents&&(t.contents=e.contents),e.config.systemInstruction&&(t.systemInstruction=e.config.systemInstruction),await this.makeRequest(`models/${e.model}:generateContent`,t)}async generateContentStream(e){let t={};return e.tools&&(t.tools=e.tools),e.config&&(t.generationConfig=e.g),e.contents&&(t.contents=e.contents),e.config.systemInstruction&&(t.systemInstruction=e.config.systemInstruction),await this.makeRequest(`models/${e.model}:streamGenerateContent`,t)}async generateImages(e){return await this.makeRequest(`models/${e.model}:generateImages`,e)}};var k=class extends U{constructor(e,t){super(e,t)}async create(e){return await this.makeRequest("tunedModels",e)}async delete(e){return await this.makeRequest(`tunedModels/${e}:delete`,{})}async get(e){return await this.makeRequest(`tunedModels/${e}`,{})}async list(e){return await this.makeRequest("tunedModels",e||{})}async patch(e){let t=`tunedModels/${e.name}`;return delete e.name,await this.makeRequest(t,e,{method:"PATCH"})}};var M=class{constructor(e,t){this.model=e,this.requestOptions=t,this.generativeModel=new C(e,t),this.tunedModels=new k(e,t)}};var I=class{constructor(e,t){this.requestOptions=t,this.model=new M(e,t)}async generateContent(e){if(typeof e=="string")return await this.model.generativeModel.generateContent({model:this.model.model,contents:{parts:{text:e}}});let t=Object.assign({},e);return t.model=this.model.model,await this.model.generativeModel.generateContent(t)}async generateContentStream(e){if(typeof e=="string")return await this.model.generativeModel.generateContentStream({model:this.model.model,contents:{parts:{text:e}}});let t=Object.assign({},e);return t.model=this.model.model,await this.model.generativeModel.generateContentStream(t)}async generateImages(e){return await this.model.generativeModel.generateImages({model:this.model.model,...e})}};var L=class{constructor(e,t){this.apiKey=e,this.requestOptions=t}async create(e){return new A({apiKey:this.apiKey,model:e.model,config:e.config,requestOptions:this.requestOptions})}async get(e){return new w({apiKey:this.apiKey,model:e,requestOptions:this.requestOptions})}};var x=class{constructor(e,t){this.apiKey=e,this.requestOptions=t,this.generativeModel=new C(this.apiKey,this.requestOptions)}async sendMessage(e){let t={};return e.config&&(t.generationConfig=e.config),e.config.systemInstruction&&(t.systemInstruction=e.config.systemInstruction),this.history&&(t.history=this.history),typeof e.message=="string"?t.contents={role:"user",parts:[{text:e.message}]}:t.contents=e.message,t.contents.role||(t.contents.role="user");let i=await this.generativeModel.generateContent(t);if(i.candidates&&i.candidates.length>0){this.history||(this.history=[]);let n=i.candidates[0].content;this.history.push(t.contents),this.history.push(n)}return i}async sendMessageStream(e){let t={};return e.config&&(t.generationConfig=e.config),e.config.systemInstruction&&(t.systemInstruction=e.config.systemInstruction),this.history&&(t.history=this.history),typeof e.message=="string"?t.contents={role:"user",parts:[{text:e.message}]}:t.contents=e.message,t.contents.role||(t.contents.role="user");let i=await this.generativeModel.generateContentStream(t),n=[],o=[];for await(let a of i)n.push(a),a.candidates&&a.candidates.length>0&&o.push(a.candidates[0]);return this.history||(this.history=[]),this.history.push(t.contents),this.history.push({parts:o,role:"model"}),n}};var A=class extends x{constructor(e){super(e.apiKey,e.requestOptions),this.model=e.model,this.generativeModel=new C(e.apiKey,e.requestOptions,{model:e.model})}};var w=class extends x{constructor(e){super(e.apiKey,e.requestOptions),this.model=e.model,this.generativeModel=new C(e.apiKey,e.requestOptions,{model:e.model})}};var S=class{constructor(e,t){let{apiKey:i,requestOptions:n}=e;this.apiKey=i,this.requestOptions=n,this.models=new I(this.apiKey,this.requestOptions),this.chats=new L(this.apiKey,this.requestOptions)}};var N=q();var E={};E.byteLength=l,E.toByteArray=h,E.fromByteArray=d;var v=["","","",""];function g(r){if(r.length<2)return r.length===1?v[r.charCodeAt(0)]:"";let e=r.charCodeAt(0),t=r.charCodeAt(1);return v[e]+v[t]}function p(r){if(r.length<3)return g(r);let e=r.charCodeAt(0),t=r.charCodeAt(1),i=r.charCodeAt(2);return v[e]+v[t]+v[i]}function y(r){let e=r.length%3;return r.length-e}function l(r){let e=y(r),t=e/3*4;return e<r.length&&t++,t}function h(r){let e,t,i=y(r),n=r.length-i,o=new Uint8Array(l(r)),a=0,s=0;for(e=0;e<i;e+=3,s+=4)t=(r.charCodeAt(e)<<16)+(r.charCodeAt(e+1)<<8)+r.charCodeAt(e+2),o[s]=t>>18&63,o[s+1]=t>>12&63,o[s+2]=t>>6&63,o[s+3]=t&63;return n===1?(t=r.charCodeAt(i),o[s]=t>>2&63,o[s+1]=t<<4&63,o[s+2]=64,o[s+3]=64):n===2&&(t=(r.charCodeAt(i)<<8)+r.charCodeAt(i+1),o[s]=t>>10&63,o[s+1]=t>>4&63,o[s+2]=t<<2&63,o[s+3]=64),o}function O(r){return(r<26?r+65:r<52?r-26+97:r<62?r-52+48:r===62?43:r===63?47)+"="}function b(r,e,t){let i=(e[t]<<16)+(e[t+1]<<8)+e[t+2];return r[e]+r[i>>12]+r[i>>6&4095]+r[i&4095]}function d(r){let e,t="",i=r.length,n=i%3;for(e=0,i-=n;e<i;e+=3)t+=O(r[e])+O(r[e+1])+O(r[e+2]);return n===1?(e=r[i],t+=O(e>>2)+O(e<<4&63)+"=="):n===2&&(e=(r[i]<<8)+r[i+1],t+=O(e>>10)+O(e>>4&63)+O(e<<2&63)+"="),t}var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");for(let r=0;r<64;r++)v[R[r].charCodeAt(0)]=r;var G=class extends Error{constructor(e,t,i,n){let o=`[${t} ${i}] ${e}`;n&&n.error&&n.error.message&&(o=`${o} ${n.error.message}`),super(o),this.status=t,this.statusText=i,this.errorDetails=n}};var z=class{constructor(e){this.apiKey=e}async makeRequest(e,t,i){let n=`${i||"https://generativelanguage.googleapis.com"}/v1beta/models/${e}:${t}`;try{let o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-key":this.apiKey},body:JSON.stringify(i)});if(!o.ok)throw new G(await o.text(),o.status,o.statusText,JSON.parse(await o.clone().text()).error);return o.json()}catch(o){if(o instanceof G)throw o;throw new T(`Error making request to ${n}: ${o.message}`)}}};var B=class{constructor(e){this.model=e,this.apiKey=e.apiKey}async generateContent(e){let t=await new z(this.apiKey).makeRequest(this.model.model,"generateContent",e),{candidates:i}=t;return i?{response:i[0]}:{response:{}}}async generateContentStream(e){let t=await new z(this.apiKey).makeRequest(this.model.model,"streamGenerateContent",e),i=await t.text(),n=i.split(`
`);for(let o of n){let a=o.slice("data: ".length);if(a){let s=JSON.parse(a);s.candidates[0].content.parts.forEach(u=>{u.text?console.log(u.text):console.log(u)})}}}}async function W(r){let e,t;if(r.blob)t=r.blob,e=r.blob.type;else if(r.url)e="image/png",t=await(await fetch(r.url)).blob();else throw new T("Please provide a blob or an url");return new Promise((i,n)=>{let o=new FileReader;o.onload=()=>i({mimeType:e,data:(o.result?.toString().split(",")[1])}),o.onerror=n,o.readAsDataURL(t)})}var Y=q(),{fromByteArray:J}=Ce(Y);async function K(r){if(r.inlineData)return{inlineData:{mimeType:r.inlineData.mimeType,data:J(r.inlineData.data)}};if(r.fileData)return{fileData:r.fileData};let e=r;return{inlineData:await W(e)}}var Z=class{constructor(e,t){this.apiKey=e,this.requestOptions=t}getGenerativeModel(e,t){return new H(this.apiKey,e,t)}startChat(e){return new V(this.apiKey,e)}};var H=class{constructor(e,t,i){this.apiKey=e,this.model=t,this.generationConfig=i?.generationConfig,this.safetySettings=i?.safetySettings,this.tools=i?.tools,this.toolConfig=i?.toolConfig,this.systemInstruction=i?.systemInstruction}async generateContent(e){let t;if(typeof e=="string"||Array.isArray(e)){let a;Array.isArray(e)?a=await Promise.all(e.map(async s=>{if(typeof s=="string")return{text:s};let{inlineData:u,fileData:f}=await K(s);return u?{inlineData:u}:f?{fileData:f}:{}})):a=[{text:e}],t=[{parts:a}]}else t=e.contents;let i={contents:t};this.generationConfig&&(i.generationConfig=this.generationConfig),this.safetySettings&&(i.safetySettings=this.safetySettings),this.tools&&(i.tools=this.tools),this.toolConfig&&(i.toolConfig=this.toolConfig),this.systemInstruction&&(i.systemInstruction=this.systemInstruction);let n=await new z(this.apiKey).makeRequest(this.model,"generateContent",i),{candidates:o}=n;if(o&&o.length>0)return{response:o[0]};{let a=n.promptFeedback;return a?{response:{promptFeedback:a}}:{response:{}}}}async generateContentStream(e){let t;if(typeof e=="string"||Array.isArray(e)){let u;Array.isArray(e)?u=await Promise.all(e.map(async f=>{if(typeof f=="string")return{text:f};let{inlineData:p,fileData:c}=await K(f);return p?{inlineData:p}:c?{fileData:c}:{}})):u=[{text:e}],t=[{parts:u}]}else t=e.contents;let i={contents:t};this.generationConfig&&(i.generationConfig=this.generationConfig),this.safetySettings&&(i.safetySettings=this.safetySettings),this.tools&&(i.tools=this.tools),this.toolConfig&&(i.toolConfig=this.toolConfig),this.systemInstruction&&(i.systemInstruction=this.systemInstruction);let n=await new z(this.apiKey).makeRequest(this.model,"streamGenerateContent",i),o=n.split(`
`),a={async*[Symbol.asyncIterator](){for(let s of o){let u=s.slice("data: ".length);if(u){let f=JSON.parse(u),{candidates:p}=f;p?yield{response:p[0]}:{let c=f.promptFeedback;yield{response:{promptFeedback:c}}}}}}};return a}async countTokens(e){let t;if(typeof e=="string"||Array.isArray(e)){let u;Array.isArray(e)?u=await Promise.all(e.map(async f=>{if(typeof f=="string")return{text:f};let{inlineData:p,fileData:c}=await K(f);return p?{inlineData:p}:c?{fileData:c}:{}})):u=[{text:e}],t=[{parts:u}]}else t=e.contents;let i={contents:t},n=await new z(this.apiKey).makeRequest(this.model,"countTokens",i);return n}async embedContent(e){let t;if(typeof e=="string"||Array.isArray(e)){let n;Array.isArray(e)?n=await Promise.all(e.map(async o=>{if(typeof o=="string")return{text:o};let{inlineData:a,fileData:s}=await K(o);return a?{inlineData:a}:s?{fileData:s}:{}})):n=[{text:e}],t=[{parts:n}]}else t=e.contents;let i={content:t[0]};return await new z(this.apiKey).makeRequest(this.model,"embedContent",i)}async batchEmbedContents(e){let t=await Promise.all(e.requests.map(async n=>({content:{parts:await Promise.all(n.content.parts.map(async o=>{let{inlineData:a,fileData:s}=await K(o);return a?{inlineData:a}:s?{fileData:s}:{}}))}})));return await new z(this.apiKey).makeRequest(this.model,"batchEmbedContents",{requests:t})}};var V=class{constructor(e,t){this.apiKey=e,this.model=t.model,this.generationConfig=t?.generationConfig,this.safetySettings=t?.safetySettings,this.history=t.history||[],this.tools=t?.tools,this.toolConfig=t?.toolConfig,this.systemInstruction=t?.systemInstruction}async sendMessage(e){let t;Array.isArray(e)?t=await Promise.all(e.map(async n=>{if(typeof n=="string")return{text:n};let{inlineData:o,fileData:a}=await K(n);return o?{inlineData:o}:a?{fileData:a}:{}})):t=[{text:e}];let i=new H(this.apiKey,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction}),n={contents:[...this.history,{role:"user",parts:t}]};this.history.push({role:"user",parts:t});let o=await i.generateContent(n),a=o.response.candidates[0].content;return this.history.push(a),o}async sendMessageStream(e){let t;Array.isArray(e)?t=await Promise.all(e.map(async n=>{if(typeof n=="string")return{text:n};let{inlineData:o,fileData:a}=await K(n);return o?{inlineData:o}:a?{fileData:a}:{}})):t=[{text:e}];let i=new H(this.apiKey,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction}),n={contents:[...this.history,{role:"user",parts:t}]},o=[],a=await i.generateContentStream(n);for await(let u of a){let f=u.response.candidates[0].content;o.push(f.parts[0])}let s={role:"model",parts:o};return this.history.push({role:"user",parts:t}),this.history.push(s),a}};var X={STRING:"STRING",NUMBER:"NUMBER",INTEGER:"INTEGER",BOOLEAN:"BOOLEAN",ARRAY:"ARRAY",OBJECT:"OBJECT",NULL:"NULL"};var D;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(D||(D={}));var $;($||($={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED";var ee;!function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.FINISH_REASON_STOP="STOP",r.FINISH_REASON_MAX_TOKENS="MAX_TOKENS",r.FINISH_REASON_SAFETY="SAFETY",r.FINISH_REASON_RECITATION="RECITATION",r.FINISH_REASON_OTHER="OTHER"}(ee||(ee={}));export{S as GoogleGenAI,T as GoogleGenAIError,B as GoogleGenerativeAI,Z as GoogleGenerativeAI,A as Chat,V as ChatSession,D as HarmCategory,X as Type,ee as FinishReason,$ as BlockedReason};

//# sourceMappingURL=index.js.map
